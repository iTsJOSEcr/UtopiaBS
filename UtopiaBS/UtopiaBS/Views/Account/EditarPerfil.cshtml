@model UtopiaBS.Models.UpdateProfileViewModel
@{
    ViewBag.Title = "Editar Perfil";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

<style>
    .edit-card {
        max-width: 520px;
        margin: 50px auto;
        background: #ffffff;
        border-radius: 18px;
        padding: 35px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        animation: fadeIn .4s ease-in-out;
    }

    .edit-title {
        font-weight: 700;
        font-size: 22px;
        text-align: center;
        margin-bottom: 25px;
        color: #333;
    }

    .edit-group label {
        font-weight: 600;
        margin-bottom: 5px;
        color: #444;
    }

    .edit-input {
        border-radius: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: .2s;
    }

    .edit-input:focus {
        border-color: #6a11cb;
        box-shadow: 0 0 5px rgba(106,17,203,.4);
    }

    .btn-save {
        background: linear-gradient(135deg, #6a11cb, #2575fc);
        color: #fff;
        border-radius: 12px;
        padding: 10px 22px;
        font-size: 15px;
        font-weight: 600;
        border: none;
        transition: .2s;
        width: 100%;
    }

    .btn-save:hover {
        opacity: .9;
    }

    .btn-back {
        margin-top: 15px;
        display: block;
        text-align: center;
        text-decoration: none;
        color: #6a11cb;
        font-weight: 600;
    }

</style>

<div class="edit-card">

    <div class="edit-title">
        <i class="bi bi-person-lines-fill me-2"></i> Editar Mi Perfil
    </div>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-1"></i> @TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @using (Html.BeginForm("EditarPerfil", "Account", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <div class="edit-group mb-3">
            <label><i class="bi bi-person-circle me-1"></i> Nombre de usuario</label>
            @Html.TextBoxFor(m => m.UserName, new { @class = "form-control edit-input" })
            @Html.ValidationMessageFor(m => m.UserName, null, new { @class = "text-danger" })
        </div>

        <div class="edit-group mb-3">
            <label><i class="bi bi-person-badge me-1"></i> Nombre</label>
            @Html.TextBoxFor(m => m.Nombre, new { @class = "form-control edit-input" })
            @Html.ValidationMessageFor(m => m.Nombre, null, new { @class = "text-danger" })
        </div>

        <div class="edit-group mb-3">
            <label><i class="bi bi-person-badge me-1"></i> Apellido</label>
            @Html.TextBoxFor(m => m.Apellido, new { @class = "form-control edit-input" })
            @Html.ValidationMessageFor(m => m.Apellido, null, new { @class = "text-danger" })
        </div>

        <div class="edit-group mb-3">
            <label><i class="bi bi-envelope-at me-1"></i> Correo</label>
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control edit-input" })
            @Html.ValidationMessageFor(m => m.Email, null, new { @class = "text-danger" })
        </div>

        <div class="edit-group mb-3">
            @Html.TextBoxFor(m => m.PhoneNumber, new
            {
                @class = "form-control edit-input",
                type = "tel",
                pattern = "[0-9]{8,15}",
                title = "Solo se permiten números (8 a 15 dígitos)",
                maxlength = "15",
                oninput = "this.value = this.value.replace(/[^0-9]/g, '');"
            })
        </div>

        <div class="edit-group mb-3">
            @Html.TextBoxFor(
                m => m.FechaNacimiento,
                "{0:yyyy-MM-dd}",
                new { @class = "form-control edit-input", type = "date" }
            )

        </div>

        <button type="submit" class="btn-save">
            <i class="bi bi-save2 me-2"></i> Guardar Cambios
        </button>

        <a href="@Url.Action("Perfil","Account")" class="btn-back">
            <i class="bi bi-arrow-left-circle me-1"></i> Volver a mi perfil
        </a>
    }
</div>
