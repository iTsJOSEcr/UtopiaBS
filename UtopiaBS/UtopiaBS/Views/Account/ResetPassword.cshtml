@{
    ViewBag.Title = "Nueva Contraseña";
}

<div class="login-light-card">
    <h3 class="text-center mb-4 fw-bold">@ViewBag.Title</h3>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger text-center rounded-3 shadow-sm mb-3">
            <i class="bi bi-exclamation-triangle-fill me-1"></i>
            @TempData["Error"]
        </div>
    }

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success text-center rounded-3 shadow-sm mb-3">
            <i class="bi bi-check-circle-fill me-1"></i>
            @TempData["Success"]
        </div>
    }

    @using (Html.BeginForm("ResetPassword", "Account", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <!-- ✅ MUY IMPORTANTE: enviar userId y token -->
        <input type="hidden" name="userId" value="@ViewBag.UserId" />
        <input type="hidden" name="token" value="@ViewBag.Token" />

        <label class="form-label fw-semibold">Nueva Contraseña</label>
        <input type="password" name="password" class="form-control mb-3"
               placeholder="********" required />

        <label class="form-label fw-semibold">Confirmar Contraseña</label>
        <input type="password" name="confirmPassword"
               class="form-control mb-4" placeholder="********" required />

        <button type="submit" class="btn-main mb-3">
            <i class="bi bi-check-circle me-1"></i> Guardar nueva contraseña
        </button>

        <div class="text-center">
            <a href="@Url.Action("Login","Account")"
               class="btn btn-outline-secondary rounded-pill px-4">
                <i class="bi bi-arrow-left-circle"></i> Volver al inicio
            </a>
        </div>
    }
</div>

<style>
    .login-light-card {
        width: 390px;
        background: #ffffff;
        border-radius: 14px;
        padding: 35px;
        border: 1px solid #e6e6e6;
        box-shadow: 0 6px 15px rgba(0,0,0,0.08);
        margin: 50px auto;
    }

    .btn-main {
        background: #6a11cb;
        color: #fff;
        border-radius: 8px;
        width: 100%;
        border: none;
        padding: 10px 0;
        font-weight: 500;
        transition: 0.2s;
    }

        .btn-main:hover {
            background: #5712a8;
        }
</style>
