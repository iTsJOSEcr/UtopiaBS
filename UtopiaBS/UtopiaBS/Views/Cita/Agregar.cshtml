@model UtopiaBS.Entities.Cita
@{
    ViewBag.Title = "Agregar Cita";
}

<!-- Bootstrap Icons (versión actualizada) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

<!-- Flatpickr -->
<link href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/themes/material_blue.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/l10n/es.js"></script>

<div class="container py-5">
    <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
        <!-- ENCABEZADO -->
        <div class="card-header text-white d-flex align-items-center justify-content-center" style="background-color:#198754;">
            <h3 class="mb-0 fw-bold d-flex align-items-center gap-2">
                <!-- Ícono visible y centrado -->
                <i class="bi bi-calendar-plus-fill text-warning" style="font-size:1.6rem;"></i>
                Agregar Cita
            </h3>
        </div>

        <!-- CUERPO -->
        <div class="card-body" style="background-color:#F8FAFC;">
            @using (Html.BeginForm("Agregar", "Cita", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true, "", new { @class = "text-danger mb-3" })

                <div class="row g-4">
                    <!-- FECHA Y HORA -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold text-secondary">📅 Fecha y Hora</label>
                        <div class="input-group pretty-field shadow-sm" style="--bg:#E3F2FD;">
                            <span class="input-group-text border-0 bg-transparent">
                                <i class="bi bi-calendar-event text-success"></i>
                            </span>
                            <input type="text" id="FechaHora" name="FechaHora"
                                   class="form-control border-0"
                                   placeholder="Seleccione fecha y hora"
                                   autocomplete="off" required />
                        </div>
                        <small class="text-muted">Formato: dd/mm/aaaa hh:mm</small>
                    </div>

                    <!-- EMPLEADO -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold text-secondary">👩‍💼 Empleado</label>
                        <div class="input-group pretty-field shadow-sm" style="--bg:#E8F5E9;">
                            <span class="input-group-text border-0 bg-transparent">
                                <i class="bi bi-person-badge text-success"></i>
                            </span>
                            <select class="form-select border-0" name="IdEmpleado" required>
                                <option value="">-- Seleccione --</option>
                                @foreach (var emp in ViewBag.Empleados as SelectList)
                                {
                                    <option value="@emp.Value">@emp.Text</option>
                                }
                            </select>
                        </div>
                    </div>

                    <!-- SERVICIO -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold text-secondary">💅 Servicio</label>
                        <div class="input-group pretty-field shadow-sm" style="--bg:#FFF8E1;">
                            <span class="input-group-text border-0 bg-transparent">
                                <i class="bi bi-scissors text-warning"></i>
                            </span>
                            <select class="form-select border-0" name="IdServicio" required>
                                <option value="">-- Seleccione --</option>
                                @foreach (var serv in ViewBag.Servicios as SelectList)
                                {
                                    <option value="@serv.Value">@serv.Text</option>
                                }
                            </select>
                        </div>
                    </div>

                    <!-- OBSERVACIONES -->
                    <div class="col-md-6">
                        <label class="form-label fw-semibold text-secondary">📝 Observaciones</label>
                        <div class="input-group pretty-field shadow-sm" style="--bg:#F3E5F5;">
                            <span class="input-group-text border-0 bg-transparent">
                                <i class="bi bi-chat-square-text text-secondary"></i>
                            </span>
                            <textarea class="form-control border-0" name="Observaciones" rows="3" placeholder="Opcional"></textarea>
                        </div>
                    </div>
                </div>

                <!-- BOTONES -->
                <div class="d-flex flex-column flex-md-row justify-content-between gap-3 mt-5">
                    <button type="submit"
                            class="btn fw-semibold text-dark border-0 shadow-sm w-100 py-2 rounded-pill"
                            style="background-color:#FFD60A;">
                        <i class="bi bi-save2 me-2"></i> Guardar Cita
                    </button>

                    @Html.ActionLink("⬅ Regresar", "Administrar", "Cita", null, new { @class = "btn btn-outline-secondary fw-semibold w-100 rounded-pill py-2" })
                </div>
            }
        </div>
    </div>
</div>

<style>
    body {
        background-color: #F1F5F9;
    }

    .card {
        transition: transform 0.2s ease;
    }

        .card:hover {
            transform: translateY(-3px);
        }

    .pretty-field {
        border-radius: 12px;
        background: var(--bg, #E3F2FD);
        overflow: hidden;
    }

        .pretty-field .form-control,
        .pretty-field .form-select {
            background: transparent !important;
            box-shadow: none !important;
        }

    .form-control:focus, .form-select:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(25, 135, 84, 0.25) !important;
        transform: translateY(-1px);
    }

    .form-select {
        padding-top: .6rem;
        padding-bottom: .6rem;
        border-radius: 0 12px 12px 0;
    }

    .btn:hover {
        opacity: 0.9;
        transform: translateY(-2px);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        flatpickr("#FechaHora", {
            locale: "es",
            enableTime: true,
            time_24hr: true,
            dateFormat: "d/m/Y H:i",
            minuteIncrement: 5,
            allowInput: true,
        });
    });
</script>
